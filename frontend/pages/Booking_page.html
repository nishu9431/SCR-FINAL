<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ParkPulse</title>
    <link rel="stylesheet" href="../css/Booking_page.css?v=20251217e">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="../js/Booking_page.js?v=20251217e" defer></script>
</head>
<body>

    <nav class="navbar">
        <div class="container">
            <a href="Landing_page.html" class="nav-logo">
                <i data-lucide="car"></i>
                <span>ParkPulse</span>
            </a>
            <div class="search-bar">
                <i data-lucide="search" class="search-icon"></i>
                <input type="text" id="searchInput" placeholder="Search by area or landmark" autocomplete="off">
                <div class="search-results" id="searchResults"></div>
            </div>
            <div class="nav-buttons">
                <div class="profile-dropdown">
                    <button class="profile-button" id="profileButton">
                        <i data-lucide="user" class="profile-icon-svg"></i>
                        <span>Profile</span>
                        <i data-lucide="chevron-down" class="chevron-icon"></i>
                    </button>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <div class="profile-info" id="profileInfo">
                            <div class="profile-avatar">
                                <i data-lucide="user" class="avatar-icon"></i>
                            </div>
                            <div class="profile-details">
                                <div class="profile-name" id="profileName">Loading...</div>
                                <div class="profile-email" id="profileEmail">Loading...</div>
                                <div class="profile-phone" id="profilePhone">Loading...</div>
                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item" onclick="showBookings(event)">
                            <i data-lucide="calendar"></i>
                            <span>Previous Bookings</span>
                        </a>
                        <a href="#" class="dropdown-item" onclick="showSettings(event)">
                            <i data-lucide="settings"></i>
                            <span>Settings</span>
                        </a>
                        <a href="Landing_page.html" class="dropdown-item logout">
                            <i data-lucide="log-out"></i>
                            <span>Log out</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <section class="hero-section">
            <div class="container hero-container">
                <div class="hero-text">
                    <h1>Find & Book <br> Your  Perfect <br>Parking Spot in Seconds</h1>
                    <p>Real-time parking availability across Bengaluru. Save time and hassle with smart parking solutions.</p>
                    <div class="hero-map-label">
                        
                    </div>
                </div>

                <div class="map-view-wrapper">
                    <div class="map-view">
                        <div class="map-background">
                            <svg width="100%" height="100%">
                                <defs>
                                    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                                        <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#6A5AF9" stroke-width="0.5"></path>
                                    </pattern>
                                </defs>
                                <rect width="100%" height="100%" fill="url(#grid)"></rect>
                            </svg>
                        </div>
                        <svg class="map-roads">
                            <line x1="30%" y1="0" x2="30%" y2="100%" stroke="#6A5AF9" stroke-width="2"></line>
                            <line x1="60%" y1="0" x2="60%" y2="100%" stroke="#6A5AF9" stroke-width="2"></line>
                            <line x1="0" y1="35%" x2="100%" y2="35%" stroke="#6A5AF9" stroke-width="2"></line>
                            <line x1="0" y1="65%" x2="100%" y2="65%" stroke="#6A5AF9" stroke-width="2"></line>
                        </svg>

                        <div class="map-city-label">üìç Bengaluru</div>

                        <div id="map-pins-container"></div>
                        
                        <div class="map-legend">
                            <p>Availability</p>
                            <div class="legend-item">
                                <div class="dot high"></div><span>High (10+)</span>
                            </div>
                            <div class="legend-item">
                                <div class="dot medium"></div><span>Medium (5-10)</span>
                            </div>
                            <div class="legend-item">
                                <div class="dot low"></div><span>Low (&lt;5)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="time-selection-section">
            <div class="container">
                <div class="time-selection-card">
                    <div class="time-selection-header">
                        <i data-lucide="clock" class="time-icon"></i>
                        <h2>Select Your Parking Time</h2>
                    </div>
                    <div class="time-inputs-wrapper">
                        <div class="time-inputs-row">
                            <div class="time-input-group">
                                <label for="start-time">
                                    <i data-lucide="calendar-check"></i>
                                    Start Time
                                </label>
                                <input type="datetime-local" id="start-time" required>
                            </div>
                            <div class="time-arrow">
                                <i data-lucide="arrow-right"></i>
                            </div>
                            <div class="time-input-group">
                                <label for="end-time">
                                    <i data-lucide="calendar-x"></i>
                                    End Time
                                </label>
                                <input type="datetime-local" id="end-time" required>
                            </div>
                        </div>
                        <button class="search-parking-btn" id="search-parking-btn">
                            <i data-lucide="search"></i>
                            <span>Search Available Parking</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="nearby-parking-section">
            <div class="container">
                <h2>Available Parking Locations</h2>
                <div class="parking-grid" id="parking-grid"></div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container footer-container">
            <p4>&copy; 2025 ParkPulse</p4>
            <div class="footer-links">
                <a href="#">Terms</a>
                <a href="#">Privacy</a>
                <a href="#">Contact</a>
                <a href="#">Help</a>
            </div>
        </div>
    </footer>

    <script>
      lucide.createIcons();
      
      // Handle Google OAuth callback - get token from URL
      const urlParams = new URLSearchParams(window.location.search);
      const token = urlParams.get('token');
      const email = urlParams.get('email');
      
      if (token && email) {
        // Store the token and email from Google OAuth
        localStorage.setItem('access_token', token);
        localStorage.setItem('user_email', email);
        
        // Clean up the URL by removing the parameters
        window.history.replaceState({}, document.title, window.location.pathname);
        
        console.log('Google OAuth login successful!');
      }
    </script>
</body>
</html>